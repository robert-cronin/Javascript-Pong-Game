<canvas id="gc" width="400" height="400"></canvas>
<script>
  fps = 1000/50

  window.onload=function() {
    canv=document.getElementById("gc");
    ctx=canv.getContext("2d");
    height=canv.height;
    width=canv.width;
    document.addEventListener("keydown",controls);
    setInterval(game,fps);
  }
  //INITIALIZE ALL CONSTANTS
  // player 1
  batX1=380; //initial plyaer 1 bat x coordinate
  batY1=340; //initial player 1 bat y coordinate
  player1=[{x:batX1,y:batY1}];
  // player 2
  batX2=10; //initial plyaer 2 bat x coordinate
  batY2=10; //initial player 2 bat y coordinate
  player2=[{x:batX2,y:batY2}];
  // bat properties
  batWidth=10; //width of each bat
  batHeight=50; //width of each bat
  ballRad=10; //radius of ball
  batBoundaryTopY=10; //bat cant go further than this boundary
  batBoundaryBottomY=390-batHeight; //bat cant go further than this boundary
  // ball properties
  ballX=ballY=400/2; //initial x, y coordinates of the ball
  //x and y velocities, final velocity will the combination of the two
  ballVelX=0.2; //initial x velocity of ball
  ballVelY=0.1; //initial y velocity of ball
  //DEFINE EACH FRAME IN FUNCTION CALLED GAME
  function game() {
    //redraw canvas
    ctx.fillStyle="black";
    ctx.fillRect(0,0,width,height);
    ctx.fillStyle="lime";

    // draw player1
    ctx.fillRect(player1[0].x, player1[0].y, batWidth, batHeight);
    player1.push({x:batX1,y:batY1});
    player1.shift();

    // draw player2
    ctx.fillRect(player2[0].x, player2[0].y, batWidth, batHeight);
    player2.push({x:batX2,y:batY2});
    player2.shift();


    // draw the ball
    ctx.beginPath();
    ctx.arc(ballX, ballY, ballRad, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.fillStyle="lime";
    ctx.fill();

    //move the ball
    ballX+=ballVelX*fps;
    ballY+=ballVelY*fps;
    //ball boundary constraints
    if (ballX<=0+ballRad || ballX>=width-ballRad) {
      ballVelX=-ballVelX;
    }
    if (ballY==0+ballRad || ballY==height-ballRad) {
      ballVelY=-ballVelY;
    }
  }
  //ADD CONTROLLER
  function controls(evt) {
    switch(evt.keyCode) {
        // player 1
        case 38: //up key
            if (batY1!=batBoundaryTopY) {
              batY1-=10;
              break;
            } else {
              break;
            }
        case 40: //down key
            if (batY1!=batBoundaryBottomY) {
              batY1+=10;
              break;
            } else {
              break;
            }
        // player 2
        case 87: //w key
            if (batY2!=batBoundaryTopY) {
              batY2-=10;
              break;
            } else {
              break;
            }
        case 83: //s key
            if (batY2!=batBoundaryBottomY) {
              batY2+=10;
              break;
            } else {
              break;
            }
      }
  }
</script>
